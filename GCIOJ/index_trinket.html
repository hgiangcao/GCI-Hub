<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secure Python IDE</title>
<style>
    .ide-container {
        font-family: sans-serif;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
    }
    
    #editor { 
        height: 400px; 
        width: 100%; 
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
    }

    .btn-bar {
        margin-top: 10px;
        text-align: right;
    }
    
    .download-btn {
        background-color: #28a745;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
    }
    .download-btn:hover {
        background-color: #218838;
    }
</style>
</head>
<body>

<div class="ide-container">
    <div id="editor"># Write your Python code here...
def hello():
    print("Hello World")

hello()</div>

    <div class="btn-bar">
        <button class="download-btn" onclick="downloadCode()">Download .py</button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.7/ace.js"></script>

<script>
    // 1. Initialize Editor
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/python");
    editor.setShowPrintMargin(false);

    // 2. DISABLE COPY / PASTE / CUT / RIGHT CLICK
    // Method A: Prevent Keyboard Shortcuts (Ctrl+C, Ctrl+V, Ctrl+X)
    editor.container.addEventListener("keydown", function(e) {
        var isCtrl = (e.ctrlKey || e.metaKey); // Detect Ctrl or Cmd (Mac)
        if (isCtrl && (e.key === 'c' || e.key === 'v' || e.key === 'x')) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }, true);

    // Method B: Prevent Context Menu (Right Click)
    editor.container.addEventListener("contextmenu", function(e) {
        e.preventDefault();
        return false;
    }, false);

    // Method C: Prevent Paste/Copy/Cut Events specifically
    editor.on("paste", function(e) { e.preventDefault(); editor.textInput.focus(); });
    editor.on("copy", function(e) { e.preventDefault(); editor.textInput.focus(); });
    editor.on("cut", function(e) { e.preventDefault(); editor.textInput.focus(); });
    
    // Method D: Disable Drag and Drop text
    editor.setOption("dragEnabled", false);


    // 3. Download Function
    function downloadCode() {
        var code = editor.getValue();
        var blob = new Blob([code], { type: "text/x-python" });
        var url = URL.createObjectURL(blob);
        var a = document.createElement("a");
        a.href = url;
        a.download = "my_script.py";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
</script>

</body>
</html>